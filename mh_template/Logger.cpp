#include "stdafx.h"
#include <tchar.h>
#include <stdio.h>
#include <windows.h>
#include <stdlib.h>
#include <conio.h>


bool WriteToLogFile(LPCSTR opis, LPCVOID pbBuffer2, DWORD dwBufferLen2)
{
	DWORD dwPos2 = 0;
	HANDLE hFile2;
	DWORD dwBytesWritten2 = 0;
	char crlf[] = "\r\n----------------------------------------------------------------\r\n";

	hFile2 = CreateFile(L"C:\\Prevenity\\dump.txt",                // name of the write
		GENERIC_WRITE,          // open for writing
		0,                      // do not share
		NULL,                   // default security
		OPEN_ALWAYS,             // create new file only
		FILE_ATTRIBUTE_NORMAL,  // normal file
		NULL);

	dwPos2 = SetFilePointer(hFile2, 0, NULL, FILE_END);
	WriteFile(hFile2, crlf, sizeof(crlf), &dwBytesWritten2, 0);
	WriteFile(hFile2, opis, strlen(opis), &dwBytesWritten2, 0);
	WriteFile(
		hFile2,
		pbBuffer2,
		dwBufferLen2,
		&dwBytesWritten2,
		NULL);
	

	CloseHandle(hFile2);

	return 1;
}